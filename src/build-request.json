{
  "kind": "build_request",
  "title": "Add expandable details tables to time period summaries",
  "projectName": "Expense Tracker",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a 'Details' button below the monthly summary section that, when clicked, expands inline to display a table of all daily expenses for the current month to date",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "below each time period summary section",
          "expand inline below the button",
          "display all"
        ]
      },
      "acceptanceCriteria": [
        "A 'Details' button appears below the monthly total display",
        "Clicking the button expands a table inline showing all expenses for the month",
        "The table displays date, category, amount, and description columns for each expense",
        "The button toggles between expand and collapse states"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add a 'Details' button below the yearly summary section that, when clicked, expands inline to display a table of all daily expenses for the current year to date",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "below each time period summary section",
          "expand inline below the button",
          "display all"
        ]
      },
      "acceptanceCriteria": [
        "A 'Details' button appears below the yearly total display",
        "Clicking the button expands a table inline showing all expenses for the year",
        "The table displays date, category, amount, and description columns for each expense",
        "The button toggles between expand and collapse states"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add a 'Details' button below the multi-yearly summary section that, when clicked, expands inline to display a table of all daily expenses across all years",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ],
        "quotes": [
          "below each time period summary section",
          "expand inline below the button",
          "display all"
        ]
      },
      "acceptanceCriteria": [
        "A 'Details' button appears below the multi-yearly total display",
        "Clicking the button expands a table inline showing all expenses across all time",
        "The table displays date, category, amount, and description columns for each expense",
        "The button toggles between expand and collapse states"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Ensure each time period's details section can be expanded and collapsed independently without affecting the other sections",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Expanding monthly details does not affect yearly or multi-yearly sections",
        "Each section maintains its own expand/collapse state",
        "Multiple sections can be expanded simultaneously"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Create a backend query method to fetch all expenses within a specified date range to support the monthly and yearly detail views",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-last"
        ]
      },
      "acceptanceCriteria": [
        "Backend provides a method to query expenses by date range",
        "Method returns expenses with all fields: id, date, category, amount, description",
        "Date filtering works correctly for month-to-date and year-to-date ranges"
      ]
    }
  ],
  "constraints": [
    "Do not modify useInternetIdentity.ts, useActor.ts, or frontend/src/components/ui files",
    "Use existing expense data structure and query patterns from the codebase",
    "Maintain the current single-actor backend architecture"
  ],
  "nonGoals": [
    "Adding filters or sorting options to the details tables",
    "Pagination or virtualization for large expense lists",
    "Exporting details to CSV or other formats",
    "Adding charts or visualizations to the details view"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}